<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="Origin-Trial" content="AsJnZlm/7O6KGy9CoC97SQG1ySeGVcD909ui0HMK7d5IpQEIjO/FWMTKvv5jPbskJUXr0Kdx4anHU/A5OTyhtA8AAABveyJvcmlnaW4iOiJodHRwczovL2JhY2tncm91bmRmZXRjaC5jb206NDQzIiwiZmVhdHVyZSI6IkJhY2tncm91bmRGZXRjaCIsImV4cGlyeSI6MTU1NTM3MjgwMCwiaXNTdWJkb21haW4iOnRydWV9">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#3367D6"/>
  <link rel="manifest" href="/manifest.json">
  <title>Background Fetch Test Website</title>
</head>
<body>

  <!-- Jumbotron on top of page -->
  <div class="jumbotron">
    <h1 class="display-4">Background Fetch Test Website</h1>
    <p class="lead">This is a test website to test different aspects and features of Background Fetch</p>
    <hr class="my-4">
    <p>For more info about Background Fetch check the <a href="https://wicg.github.io/background-fetch/">spec</a>.</p>
  </div>

  
  <div class="container-fluid">
    <div class="row">

      <!-- First column of options -->
      <div class="col-12 col-md-6 col-lg-4">
        <h1>Options</h1>
        <fieldset class="form-group">
          <legend>Customize the fetch options</legend>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input has-text" id="fetch-id">
              Use custom fetch ID
            </label>
            <input type="text" class="form-control w-75" id="fetch-id-text" value="my-fetch" disabled>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input has-text" id="downloadtotal">
              Provide custom <code>downloadTotal</code> <i>(default is best estimate)</i>
            </label>
            <input type="text" class="form-control w-75" id="downloadtotal-text" disabled>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input has-text" id="title" checked>
              Provide title
            </label>
            <input type="text" class="form-control w-75" id="title-text" value="My Title!">
          </div>

          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input has-text" id="image-resource" checked>
              Include ImageResource
            </label>
            <div class="input-group w-75">
              <div class="input-group-prepend w-50">
                <button type="button" class="active btn btn-outline-primary w-100 radio-button" data-toggle="button" aria-pressed="true" id="image-resource-src">
                  src
                </button>
              </div>
              <input type="text" class="form-control w-50" id="image-resource-src-text" value="resources/icon1.png" > 
            </div>
            <div class="input-group w-75">
              <div class="input-group-prepend w-50">
                <button type="button" class="active btn btn-outline-primary w-100 radio-button" data-toggle="button" aria-pressed="true" id="image-resource-sizes">
                 sizes
                </button>
              </div>
              <input type="text" class="form-control w-50" id="image-resource-sizes-text" value="128x128"> 
            </div>
            <div class="input-group w-75">
              <div class="input-group-prepend w-50">
                <button type="button" class="btn btn-outline-secondary w-100 radio-button" data-toggle="button" aria-pressed="false" id="image-resource-type">
                  type
                </button>
              </div>
              <input type="text" class="form-control w-50" id="image-resource-type-text" value="image/png" disabled> 
            </div>
            <div class="input-group w-75">
              <div class="input-group-prepend w-50">
                <button type="button" class="active btn btn-outline-primary w-100 radio-button" data-toggle="button" aria-pressed="true" id="image-resource-purpose">
                  purpose
                </button>
              </div>
              <input type="text" class="form-control w-50" id="image-resource-purpose-text" value="any"> 
            </div>
          </div>
        </fieldset>
      </div>
      
      <!-- Second column of requests -->
      <div class="col-12 col-md-6 col-lg-4">
        <h1>Requests</h1>
        <fieldset class="form-group">
          <legend>Customize the requests to fetch</legend>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-text" checked>
              Fetch a text file
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-image" checked>
              Fetch an image
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-many-small">
              Fetch 100 small files
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-random">
              Fetch a file with random values
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-cors" disabled>
              Fetch a cross origin file (allowed)
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-cross-origin">
              Fetch a cross origin file (not allowed)
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-delay">
                Fetch a file with a delay of
                <select id="delay-seconds">
                    <option>1</option>
                    <option>5</option>
                    <option>10</option>
                    <option>30</option>
                    <option>60</option>
                    <option>120</option>
                  </select> 
                seconds
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-404">
              Fetch a missing file <code>[404]</code>
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-301" disabled>
              Fetch a file with a redirect <code>[301]</code>
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-duplicate">
              Fetch same file twice (duplicate url)
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-upload">
              Fetch request with body (upload)
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="request-upload-large">
                Fetch request with a large body 
                <select id="upload-size">
                    <option>1</option>
                    <option>5</option>
                    <option>10</option>
                    <option>30</option>
                    <option>60</option>
                    <option>120</option>
                  </select> 
                MB
            </label>
          </div>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input has-text" id="request-custom">
              Fetch custom file
            </label>
            <input type="text" class="form-control w-75" id="request-custom-text" value="" disabled>
          </div>
        </fieldset>
      </div>

      <!-- Third colums for custom behaviour -->
      <div class="col-12 col-md-6 col-lg-4">
        <h1>Misc</h1>
        <fieldset class="form-group">
          <legend>Misc options to include with the fetch</legend>
          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="fetch-twice">
              Fetch twice (Trigger Permission)
            </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input has-text" id="update-ui" checked>
              Update UI (empty fields are not used)
            </label>
            <div class="input-group w-75">
              <div class="input-group-prepend w-50">
                <button type="button" class="active btn btn-outline-primary w-100 radio-button" data-toggle="button" aria-pressed="true" id="update-ui-title">
                  Title
                </button>
              </div>
              <input type="text" class="form-control w-50" id="update-ui-title-text" value="Updated Title!" > 
            </div>
            <div class="input-group w-75">
              <div class="input-group-prepend w-50">
                <button type="button" class="active btn btn-outline-primary w-100 radio-button" data-toggle="button" aria-pressed="true" id="update-ui-src">
                  Icon src
                </button>
              </div>
              <input type="text" class="form-control w-50" id="update-ui-src-text" value="resources/icon2.png" > 
            </div>
          </div>

          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="update-ui-twice">
              Update UI twice
            </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="start-fetch-sw" disabled>
              Start fetch from the service worker
            </label>
          </div>

          <div class="form-check">
            <label class="form-check-label">
              <input type="checkbox" class="form-check-input" id="start-fetch-iframe" disabled>
              Start fetch from an iframe
            </label>
          </div>
        </fieldset>
      </div>
    </div>

    <hr>
    <!-- Second row starts -->
    <div class="row">
      <div class="col-lg-5 offset-lg-3">
        <button class="btn btn-primary btn-block btn-lg" id="start-fetch-btn" disabled>Start Background Fetch!</button>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="abandon" checked>
          <label class="form-check-label" for="abandon">Abandon fetches</label>
        </div>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="clear-page">
          <label class="form-check-label" for="clear-page">Clear page / logs</label>
        </div>
      </div>
    </div>

    <br>
    <hr>
  
    <!-- Third row starts -->
    <div class="row">
      <div class="col-12 col-md-6 col-lg-4 text-truncate">
        <h1 class="text-center">Fetch Results</h1>
        <div id="fetch-results-container">
        </div>
      </div>
      <div class="col-12 col-md-6 col-lg-4">
        <h1 class="text-center border-right border-left">Fetch Progress</h1>
        <br>
        <div id="progress-container" class="w-75"></div>
      </div>
      <div class="col-12 col-md-6 col-lg-4">
        <h1 class="text-center">Log</h1>
        <div class="log-entries text-monospace" id="log"></div>
      </div>
    </div>

  </div>

  <!-- Bootstrap because I can't CSS. -->
  <link rel="stylesheet" href="static/bootstrap.css">
  <script src="static/jquery.js"></script>
  <script src="static/popper.js"></script>
  <script src="static/bootstrap.js"></script>
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="styles.css">
  
  <!-- BGF scripts -->
  <script src="index.js"></script>
  <script src="bgf.js"></script>
  <script src="fetch-builder.js"></script>
</body>
</html>
